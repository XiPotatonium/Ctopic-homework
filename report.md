# 实验报告（纯文字版）

题目：图书管理系统

组号：201818

成员：
3170101509-钟嘉农  
3170101508-邬树辉

提交人：  
联系电话：  
Email:

任课教师：肖少拥

递交日期：2018/4/


## 1. 程序简介

LibMan为一款便捷、轻量级、安全的命令行图书管理系统，除了图书增、删、改、查找等操作外，还提供了加密功能，有效保护文件不被窃取、篡改。  
图书的信息包括书名，书号，作者，出版社，关键词，出版日期。

## 2. 使用说明
 * 设置密码
 * 添加记录  
输入`add`可以循环添加记录，如果在输入书名的时候直接回车那么就会终止输入，把之前输入的信息加入记录中。
 * 删除记录  
输入`del`可以删除记录，目前只支持`-id`参数，通过id来确定图书。如果id不存在那么什么也不会做。
 * 修改记录  
输入`modify`可以修改图书记录，目前只支持`-id`参数，重新输一遍图书信息，而后更新记录。
 * 查找记录  
输入`search`可以查找记录，支持`-name`、`-author`、`-key`、`-all`这几个参数，分别是在书名中精确匹配，在作者中查找字串，在关键词中查找字串，在书名、作者、关键词中查找子字串。注：查找子串使用strstr查看搜索关键字是否是书的信息的一个字串，如果是，就打印这本书的信息。这样的功能设计是仿照浙大图书馆微信公众号的查询功能。
 * 导出文件  
输入`export`可以将图书导出到一个文本文件中，目前支持`-all`，即将记录中所有的图书信息导出到一个文件中。
 * 导入文件  
正在施工
 * 命令帮助

## 3. 文件说明

### __libman.h libman.c__
主程序代码，定义了所有与图书有关的操作，且实现了交互式的命令行，支持各种指令。

### __main.c__
int main()所在的文件，调用libman的交互式命令行。

### __aes256.h aes256.c__
提供了AES256加密算法的函数，在他人现有的源码进行了一定程度的封装，方便调用。

### __libman.db__
存储图书的数据文件。  

## 4. 主要算法说明  

### __AES256__  
### __散列和链表__  
考虑到这个软件中只有书名是精确查找，而且用户大多数情况下是用书名作为关键字进行搜索，所以我们用书名的首字母来生成散列表，这样可以极大地加快搜索的效率。每一个散列“桶”都用一个链表来储存节点。这个链表是有哨兵的双向循环链表。说明：哨兵节点是连接链表头和链表尾的一个不储存图书信息的节点，这样在插入或者删除节点的时候完全不用考虑在链表头和在链表尾插入删除这样的边界情况，代码可以比较简洁，紧凑。这个链表是根据书名排了序的，所以在搜索的时候遇到节点书名大于目标书名的时候就可以终止搜索。

## 5. 优缺点  
土质cmd是坠吼的！